---
title: "【GCP】Quota 'SSL_CERTIFICATES' exceeded. Limit: 10.0 globally."
pubDate: 2024-07-22
categories: ["Google Cloud"]
tags: []
---

こんにちは、フリーランスエンジニアの太田雅昭です。

## GCPでSSLの割り当て上限

今回Cloud Runでドメインを割り当てていました。Cloud Runの画面で、カスタムドメインを管理から、簡単に行えます。

簡単に行えるがために、何度も割り当てを変更したりしていたら、タイトルの通り上限に引っかかってしまったというお話です。

というのも、思いつきでサブドメインの順番を変えてみたところ、いやこれだとクッキーのドメイン指定で詰まるなと戻してみたところ、あれそもそもその部分は対策済みだよね、やっぱり最初の思いつき通り変更しよう => 上限

といった具合でした。すると無駄なSSLが残ってしまった様です。

リソースの検索で「SSL」と入力すると、不採用にしたSSLが残っており、削除しようとしても使用中とのことでできませんでした。

## 原因

いまだに原因ははっきりしませんが、おそらく何度も変更を繰り返すうち、デッドロック的な状態になったのではないかと思います。私のプロジェクトではSSL証明書の上限は10なのですが、そのうち8を使用しています。さらにその中で4つを前述の通り何度もいじったものだから、生成中のSSLと新規SSLとでデッドロック的になり、進めなくなったのではないかと。イメージです。

## 解決

解決としましては、とりあえず一旦カスタムドメインのいくつかを削除しました。すると残ってしまっていたSSLも消えてくれましたので、無事回復することができました。

## 余談

最近はミルクティーにはまってます。一気に飲むとちょっと牛乳ぽさが際立ってしまいますので、ちびちび行っています。