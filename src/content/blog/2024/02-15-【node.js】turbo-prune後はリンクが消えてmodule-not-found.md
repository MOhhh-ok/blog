---
title: "【Node.js】turbo prune後はリンクが消えてmodule not found"
pubDate: 2024-02-15
categories: ["Node.js"]
tags: []
---

こんにちは、フリーランスエンジニアの太田雅昭です

## turbo prune

turboはモノレポ用のツールです。依存関係をルートにまとめてくれたり、ビルドプロセスを同時実行で効率化してくれたりします。

そんなturboのpruneは、依存関係にあるプロジェクトを抽出してくれます。本番環境への移行時などに使うことを想定しているものと思われます。私もdockerイメージ作成時に使っています。

## pruneあとはリンクが消える

```
turbo prune --scope=xxx
```

でoutディレクトリにコピーされたファイル群が入ります。これを、例えばdockerのCOPYコマンドで使用したとします。ところがmodule not foundになり、ただでさえ状況を把握しづらいdockerコンテナ内での出来事にヤキモキしてコーヒーをがぶ飲みすること間違いなしです。

module not foundになる原因は、workspaceのリンクが切れているためです。そのため、以下のコマンドで治ります。

```
yarn install
```

## 小話

久しぶりにチョコが食べたいです。そんな時、ありますよね？ちょっと買ってこようと思います。